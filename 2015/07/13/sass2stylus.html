<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="Yuta Ide"><meta name="description" content="SassをStylusに変換する際に気をつけるべきポイント"><title>ideyuta.com&mdash;SassをStylusに変換する際に気をつけるべきポイント</title><link href="/favicon.png" rel="icon"><link href="http://fonts.googleapis.com/earlyaccess/notosansjapanese.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/base.css"><script>var ide = {};</script><script src="/js/base.js"></script></head><body><div class="Wrapper"><div class="Header"><h1><a href="/"><img src="/images/ide.svg" width="32" height="32"></a></h1><div class="pageResponse"><div class="BtnGroup"><a data-url="http://ideyuta.com/" href="https://twitter.com/intent/tweet?original_referer=http://ideyuta.com/&amp;text=ideyuta.com - http://ideyuta.com" class="tweet btn f"><i class="znicon-twitter"></i><span class="count"></span></a><a data-url="http://ideyuta.com/" href="javascript: void(0);" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://ideyuta.com/&amp;t=ideyuta.com', 'share', 'width=500, height=280');" class="like btn f"><i class="znicon-facebook"></i><span class="count"></span></a><a data-url="http://ideyuta.com/" href="javascript: void(0);" onclick="window.open('http://b.hatena.ne.jp/entry/add/http://ideyuta.com/', 'share', 'width=750, height=600');" class="hatebu btn f"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png"><span class="count"></span></a></div></div></div><div class="PostDetail"><div class="PostMeta"><h2 class="title">SassをStylusに変換する際に気をつけるべきポイント</h2><div class="Meta"><div class="date"><p>2015-07-13</p></div><div class="categories"><ul><li><a href="/categories/dev/">dev</a></li></ul></div></div></div><div class="PostContent"> <p>SassをStylusに変換した際に結構ハマったので、気をつけるべきポイントと、SassとStylusの細かい違いをまとめます。</p>
<p>sass2stylus<span class="super">※1</span>を使って変換しますが、いまいち変換しきれないポイントがあるので、stylus素人はハマります。また、ローカルでガンガン変換していくためにnpmでsass2stylusをインストールできますが、これまたうまく動かないので、<a href="http://qiita.com/sugarshin/items/8315fa10250acd86bfb0" target="_blank" rel="external">こちら</a>を参考にして動くようにしてください。</p>
<div class="SideMatter" style="top:488px;"><ul><br><li><br><p>※1</p><br><a href="https://github.com/mojotech/sass2stylus" target="_blank" rel="external">sass2stylus</a></li><br><li><br><p>参考</p><br><a href="http://qiita.com/sugarshin/items/8315fa10250acd86bfb0" target="_blank" rel="external">Qiita : sassをstylusに変換する</a></li><br></ul></div>


<p>##複数のセレクタを指定している部分がひとつのセレクタのみになってしまう</p>
<p>変換前<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.hoge</span>, <span class="class">.fuga</span> &#123;</span><br><span class="line">  <span class="attribute">width</span><span class="value">: <span class="number">100%</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>変換後<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.hoge</span>,</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span></span><br></pre></td></tr></table></figure></p>
<p>手動で追加するほかないのか…</p>
<p>##変数をcontentに入れる場合、括弧はいらない</p>
<p>変換前<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.hoge</span> &#123;</span><br><span class="line">  <span class="attribute">content</span><span class="value">: <span class="string">"#&#123;$foo&#125;"</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>変換後<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.hoge</span><br><span class="line">  content: &#123;$foo&#125;</span><br></pre></td></tr></table></figure></p>
<p>正しくはこっち<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.hoge</span></span><br><span class="line">  <span class="attribute">content</span>: <span class="variable">$foo</span></span><br></pre></td></tr></table></figure></p>
<p>##Mixinにブロックコンテンツを渡す@contentは{block}で代用できるが、呼び出し側に+接頭詞が必要</p>
<div class="SideMatter" style="top:1822px;"><ul><br><li><br><p>参考</p><br><a href="https://learnboost.github.io/stylus/docs/mixins.html#block-mixins" target="_blank" rel="external">Block Mixins - Stylus</a></li><br></ul></div>

<p>###@contentは{block}で代用</p>
<p>変換前<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> hoge</span>() &#123;</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">content</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>変換後<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hoge</span><br><span class="line">  &#123;block&#125;</span><br></pre></td></tr></table></figure></p>
<p>###呼び出し元に注意</p>
<p>変換前<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> hoge</span>() &#123;</span></span><br><span class="line">  <span class="class">.fuga</span></span><br><span class="line">    <span class="tag">p</span> piyo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>変換後（そもそもMixin内のブロックコンテンツが消えてた…）<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">hoge</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure></p>
<p>正しくはこっち<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+<span class="function"><span class="title">hoge</span><span class="params">()</span></span></span><br><span class="line">  <span class="class">.fuga</span></span><br><span class="line">    <span class="tag">p</span> piyo</span><br></pre></td></tr></table></figure></p>
<p>##デフォルト値の指定は!defaultではなく?=を使う</p>
<p>変換前<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$hode</span><span class="value">: <span class="number">100px</span> !default;</span></span><br></pre></td></tr></table></figure></p>
<p>変換後<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$hoge</span> = <span class="number">100px</span></span><br></pre></td></tr></table></figure></p>
<p>正しくはこっち<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$hoge ?= 100px</span><br></pre></td></tr></table></figure></p>
<p>##古いIEに対応する場合の注意</p>
<p>こういう記述はエラーと判定される</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">filter</span><span class="value">: <span class="function">alpha</span>(opacity=<span class="number">0</span>);</span></span><br></pre></td></tr></table></figure>
<p>そんなときはunquoteを使う</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">filter</span>: <span class="function"><span class="title">unquote</span><span class="params">(<span class="string">'alpha(opacity=0'</span>)</span></span></span><br></pre></td></tr></table></figure>
<p>##@importはアンダースコアも記述</p>
<p>sass2stylusでは変換されないので注意。[_hoge.scss/stylus]というファイル名だったとすると</p>
<p>scssの場合<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">import</span> <span class="string">'hoge'</span>;</span></span><br></pre></td></tr></table></figure></p>
<p>stylusの場合<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="at_rule">@import</span> <span class="string">'_hode'</span></span><br></pre></td></tr></table></figure></p>
<p>##フォントアイコンが変換で文字化ける</p>
<p>変換前<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">content</span><span class="value">: <span class="string">'\e600'</span>;</span></span><br></pre></td></tr></table></figure></p>
<p>変換後<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">content</span>: <span class="string">""</span></span><br></pre></td></tr></table></figure></p>
</div><div class="Share"><ul><li data-url="http://ideyuta.com/2015/07/13/sass2stylus.html" class="tweet"><a href="https://twitter.com/intent/tweet?original_referer=http://ideyuta.com/2015/07/13/sass2stylus.html&amp;text=SassをStylusに変換する際に気をつけるべきポイント ｜ ideyuta.com http://ideyuta.com/2015/07/13/sass2stylus.html" class="btn"><i class="znicon-twitter"></i><span class="count"></span></a></li><li data-url="http://ideyuta.com/2015/07/13/sass2stylus.html" class="like"><a href="javascript: void(0);" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://ideyuta.com/2015/07/13/sass2stylus.html&amp;t=SassをStylusに変換する際に気をつけるべきポイント', 'share', 'width=500, height=280');" class="btn"><i class="znicon-facebook"></i><span class="count"></span></a></li><li data-url="http://ideyuta.com/2015/07/13/sass2stylus.html" class="hatebu"><a href="javascript: void(0);" onclick="window.open('http://b.hatena.ne.jp/entry/add/http://ideyuta.com/2015/07/13/sass2stylus.html', 'share', 'width=750, height=600');" class="btn"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png"><span class="count"></span></a></li></ul></div></div></div><div class="Footer"><div class="Profile"><div class="thumb"><img src="/images/ideyuta.jpg"></div><div class="bio"><h4 class="name">井出 優太</h4><p class="summary">1988年静岡県生まれ。多摩美術大学大学院 情報デザイン領域 経験デザイン 修了。株式会社カンム所属。</p><div class="social BtnGroup"><a href="https://twitter.com/_ideyuta" class="btn f twitter"><i class="znicon-twitter"></i><span>Twitter</span></a><a href="https://www.facebook.com/XA2007.055" class="btn f facebook"><i class="znicon-facebook"></i><span>Facebook</span></a><a href="https://github.com/ideyuta" class="btn f github"><i class="znicon-github"></i><span>GitHub</span></a><a href="mailto:ide.yuta@gmail.com" class="btn f"><i class="znicon-mail"></i><span>Mail</span></a></div></div></div><div class="Copyright"><p>&copy; 2015 ideyuta.com</p></div></div></body></html>