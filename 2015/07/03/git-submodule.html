<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="Yuta Ide"><meta name="description" content="submoduleのブランチを変更する"><title>ideyuta.com&mdash;submoduleのブランチを変更する</title><link href="/favicon.png" rel="icon"><link href="http://fonts.googleapis.com/earlyaccess/notosansjapanese.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/base.css"><script>var ide = {};</script><script src="/js/base.js"></script></head><body><div class="Wrapper"><div class="Header"><h1><a href="/"><img src="/images/ide.svg" width="32" height="32"></a></h1><div class="pageResponse"><div class="BtnGroup"><a data-url="http://ideyuta.com/" href="https://twitter.com/intent/tweet?original_referer=http://ideyuta.com/&amp;text=ideyuta.com - http://ideyuta.com" class="tweet btn f"><i class="znicon-twitter"></i><span class="count"></span></a><a data-url="http://ideyuta.com/" href="javascript: void(0);" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://ideyuta.com/&amp;t=ideyuta.com', 'share', 'width=500, height=280');" class="like btn f"><i class="znicon-facebook"></i><span class="count"></span></a><a data-url="http://ideyuta.com/" href="javascript: void(0);" onclick="window.open('http://b.hatena.ne.jp/entry/add/http://ideyuta.com/', 'share', 'width=750, height=600');" class="hatebu btn f"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png"><span class="count"></span></a></div></div></div><div class="PostDetail"><div class="PostMeta"><h2 class="title">submoduleのブランチを変更する</h2><div class="Meta"><div class="date"><p>2015-07-03</p></div><div class="categories"><ul><li><a href="/categories/dev/">dev</a></li></ul></div></div></div><div class="PostContent"> <p>##submoduleのブランチを変えたい</p>
<p>Gitのsubmoduleはいろいろ厄介なやつですが、今回は特定のブランチをsubmoduleとして追加していた際に、そのブランチを別のブランチへ変更する方法をまとめます。<br>もっといい方法があるかもしれませんので、知っている人は教えて下さい。方法としては、1度submoduleを削除して入れ直しています。</p>
<p>##submoduleの削除</p>
<p>まずQiitaにあったsubmoduleの削除方法<span class="super">※1</span>を参考にsudmoduleを削除します。</p>
<div class="SideMatter" style="top:712px;"><ul><br><li><br><p>※1</p><br><a href="http://qiita.com/u1aryz/items/8d1923da79158439eeaa" target="_blank" rel="external">git submoduleを今風な感じで削除する</a></li><br></ul></div>

<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule deinit path/<span class="keyword">to</span>/submodule</span><br><span class="line">$ git rm path/<span class="keyword">to</span>/submodule</span><br><span class="line">$ git config -<span class="keyword">f</span> .gitmodules --<span class="built_in">remove</span>-section submodule.path/<span class="keyword">to</span>/submodule</span><br></pre></td></tr></table></figure>
<p>##.git/modules内のファイルの削除</p>
<p>上記コマンドでsubmodule自体は削除されましたが、再度同じsubmoduleを追加しようとすると、これまでのbranchで追加されてしまう現象が発生しました。<br>どうやら、<code>.git/modules</code>内のファイルを削除する必要があったようです。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rm -<span class="keyword">r</span> .git/modules/path/<span class="keyword">to</span>/submodule</span><br></pre></td></tr></table></figure>
<p>##再インストール</p>
<p>削除した後、再インストールすることでブランチを変えることができます。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git submodule add -b &lt;BRANCH&gt; git@github.com:submodule</span><br></pre></td></tr></table></figure>
<p>以上です。</p>
</div><div class="Share"><ul><li data-url="http://ideyuta.com/2015/07/03/git-submodule.html" class="tweet"><a href="https://twitter.com/intent/tweet?original_referer=http://ideyuta.com/2015/07/03/git-submodule.html&amp;text=submoduleのブランチを変更する ｜ ideyuta.com http://ideyuta.com/2015/07/03/git-submodule.html" class="btn"><i class="znicon-twitter"></i><span class="count"></span></a></li><li data-url="http://ideyuta.com/2015/07/03/git-submodule.html" class="like"><a href="javascript: void(0);" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://ideyuta.com/2015/07/03/git-submodule.html&amp;t=submoduleのブランチを変更する', 'share', 'width=500, height=280');" class="btn"><i class="znicon-facebook"></i><span class="count"></span></a></li><li data-url="http://ideyuta.com/2015/07/03/git-submodule.html" class="hatebu"><a href="javascript: void(0);" onclick="window.open('http://b.hatena.ne.jp/entry/add/http://ideyuta.com/2015/07/03/git-submodule.html', 'share', 'width=750, height=600');" class="btn"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png"><span class="count"></span></a></li></ul></div></div></div><div class="Footer"><div class="Profile"><div class="thumb"><img src="/images/ideyuta.jpg"></div><div class="bio"><h4 class="name">井出 優太</h4><p class="summary">1988年静岡県生まれ。多摩美術大学大学院 情報デザイン領域 経験デザイン 修了。株式会社カンム所属。</p><div class="social BtnGroup"><a href="https://twitter.com/_ideyuta" class="btn f twitter"><i class="znicon-twitter"></i><span>Twitter</span></a><a href="https://www.facebook.com/XA2007.055" class="btn f facebook"><i class="znicon-facebook"></i><span>Facebook</span></a><a href="https://github.com/ideyuta" class="btn f github"><i class="znicon-github"></i><span>GitHub</span></a><a href="mailto:ide.yuta@gmail.com" class="btn f"><i class="znicon-mail"></i><span>Mail</span></a></div></div></div><div class="Copyright"><p>&copy; 2015 ideyuta.com</p></div></div></body></html>