<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="Yuta Ide"><meta name="description" content="nbem - JSX内でBEMを簡単かつ直感的に記述する"><title>ideyuta.com&mdash;nbem - JSX内でBEMを簡単かつ直感的に記述する</title><link href="/favicon.png" rel="icon"><link href="http://fonts.googleapis.com/earlyaccess/notosansjapanese.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/base.css"><script>var ide = {};</script><script src="/js/base.js"></script></head><body><div class="Wrapper"><div class="Header"><h1><a href="/"><img src="/images/ide.svg" width="32" height="32"></a></h1><div class="pageResponse"><div class="BtnGroup"><a data-url="http://ideyuta.com/" href="https://twitter.com/intent/tweet?original_referer=http://ideyuta.com/&amp;text=ideyuta.com - http://ideyuta.com" class="tweet btn f"><i class="znicon-twitter"></i><span class="count"></span></a><a data-url="http://ideyuta.com/" href="javascript: void(0);" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://ideyuta.com/&amp;t=ideyuta.com', 'share', 'width=500, height=280');" class="like btn f"><i class="znicon-facebook"></i><span class="count"></span></a><a data-url="http://ideyuta.com/" href="javascript: void(0);" onclick="window.open('http://b.hatena.ne.jp/entry/add/http://ideyuta.com/', 'share', 'width=750, height=600');" class="hatebu btn f"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png"><span class="count"></span></a></div></div></div><div class="PostDetail"><div class="PostMeta"><h2 class="title">nbem - JSX内でBEMを簡単かつ直感的に記述する</h2><div class="Meta"><div class="date"><p>2015-12-08</p></div><div class="categories"><ul><li><a href="/categories/dev/">dev</a></li></ul></div></div></div><div class="PostContent"> <p>最近はReactを書く機会が増え、同時にJSXを書く機会が増えた。HTMLで書いていた時からBEM記法でのクラス記述の冗長性を疎ましく思っていたが、全てJSで書けるようになったので、JSX内でBEMを簡単に記述できるJSモジュールを作ることにした。</p>
<h2 id="nbem"><a href="#nbem" class="headerlink" title="nbem"></a>nbem</h2><p><a href="https://github.com/ideyuta/nbem" target="_blank" rel="external">https://github.com/ideyuta/nbem</a></p>
<p>nbemはBEM記法を簡単かつ直感的に記述することを目指したJSモジュール。requireしたnbemのクロージャ関数を変数に入れて使う。</p>
<h3 id="u57FA_u672C"><a href="#u57FA_u672C" class="headerlink" title="基本"></a>基本</h3><p><code>&amp;</code> で階層（element）を定義し <code>:</code> で変化（modifier）を定義する。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> nbem = <span class="built_in">require</span>(nbem);</span><br><span class="line"><span class="keyword">var</span> bem = nbem();</span><br><span class="line"></span><br><span class="line">bem(<span class="string">'header'</span>); <span class="comment">// =&gt; "header"</span></span><br><span class="line">bem(<span class="string">'&amp;nav'</span>); <span class="comment">// =&gt; "header__nav"</span></span><br><span class="line">bem(<span class="string">'&amp;&amp;item'</span>); <span class="comment">// =&gt; "header__nav__item"</span></span><br><span class="line"></span><br><span class="line">bem(<span class="string">'header:global'</span>); <span class="comment">// =&gt; "header--global"</span></span><br><span class="line">bem(<span class="string">'&amp;nav'</span>); <span class="comment">// =&gt; "header--global__nav"</span></span><br></pre></td></tr></table></figure>
<p>クロージャ関数からは文字列が返ってくるのでそのままクラス名へ。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;header className=&#123;bem(<span class="string">'header'</span>)&#125; /&gt;</span><br></pre></td></tr></table></figure>
<h3 id="u30AF_u30E9_u30B9_u540D_u306E_u9023_u7D50"><a href="#u30AF_u30E9_u30B9_u540D_u306E_u9023_u7D50" class="headerlink" title="クラス名の連結"></a>クラス名の連結</h3><p>状態などの別クラスを連結したい場合は、クロージャ関数の第二引数に文字列もしくは文字列のリストを渡すことで連結できる。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bem(<span class="string">'header'</span>); <span class="comment">// =&gt; "header"</span></span><br><span class="line">bem(<span class="string">'&amp;nav'</span>, <span class="string">'isActive'</span>); <span class="comment">// =&gt; "header__nav isActive"</span></span><br><span class="line">bem(<span class="string">'&amp;nav'</span>, [<span class="string">'isActive'</span>, <span class="string">'isHover'</span>]); <span class="comment">// =&gt; "header__nav isActive isHover"</span></span><br><span class="line">bem(<span class="string">'&amp;&amp;item'</span>); <span class="comment">// =&gt; "header__nav__item"</span></span><br></pre></td></tr></table></figure>
<p>実際のプロダクト内では、<a href="https://github.com/JedWatson/classnames" target="_blank" rel="external">classnames</a>と併用することが想定される。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">getClassName() &#123;</span><br><span class="line">  <span class="keyword">return</span> classnames(&#123;isActive: <span class="literal">false</span>, isHover: <span class="literal">true</span>&#125;);</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">  <span class="keyword">const</span> h = nbem();</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="title">header</span> <span class="attribute">className</span>=<span class="value">&#123;h('header',</span> <span class="attribute">this.getClassName</span>())&#125; /&gt;</span>;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="u63A5_u7D9A_u8A5E_u306E_u5909_u66F4"><a href="#u63A5_u7D9A_u8A5E_u306E_u5909_u66F4" class="headerlink" title="接続詞の変更"></a>接続詞の変更</h3><p>BEMの基本的な接続詞は、elementが <code>&#39;__&#39;</code> 、modifireが <code>&#39;--&#39;</code>であるが、nbemでは変更する機構を備えている。nbemからシングルトンのconfigインスタンスを取り出すことができ、configに対してsetSeparatorを実行することで変更できる。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = <span class="built_in">require</span>(nbem).config;</span><br><span class="line">config.setSeparator(<span class="string">'-'</span>, <span class="string">'_'</span>); <span class="comment">// element, modifier</span></span><br><span class="line">header(<span class="string">'header:global'</span>); <span class="comment">// =&gt; "header-global"</span></span><br><span class="line">header(<span class="string">'&amp;title'</span>) <span class="comment">// =&gt; "header-global_title"</span></span><br></pre></td></tr></table></figure>
<h3 id="React_ES6__u3067_u306E_u8A18_u8FF0_u4F8B"><a href="#React_ES6__u3067_u306E_u8A18_u8FF0_u4F8B" class="headerlink" title="React ES6 での記述例"></a>React ES6 での記述例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> nbem <span class="keyword">from</span> <span class="string">'nbem'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Header</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">const</span> bem = nbem();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="title">header</span> <span class="attribute">className</span>=<span class="value">&#123;bem('header')&#125;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">h1</span> <span class="attribute">className</span>=<span class="value">&#123;bem('&amp;title')&#125;</span>&gt;</span>Title<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">p</span> <span class="attribute">className</span>=<span class="value">&#123;bem('&amp;description')</span>&gt;</span>Description<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="title">header</span>&gt;</span></span><br><span class="line">    )</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Render:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">header</span> <span class="attribute">class</span>=<span class="value">"header"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">h1</span> <span class="attribute">class</span>=<span class="value">"header__title"</span>&gt;</span>Title<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"header__description"</span>&gt;</span>Description<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">header</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h2 id="nbem_u3092_u5229_u7528_u3057_u3066_u3044_u308B_u30D7_u30ED_u30B8_u30A7_u30AF_u30C8"><a href="#nbem_u3092_u5229_u7528_u3057_u3066_u3044_u308B_u30D7_u30ED_u30B8_u30A7_u30AF_u30C8" class="headerlink" title="nbemを利用しているプロジェクト"></a>nbemを利用しているプロジェクト</h2><ul>
<li><a href="https://github.com/tongariboyz/5rolli" target="_blank" rel="external">tongariboyz/5rolli</a></li>
<li><a href="https://github.com/moqada/5rolli-crx" target="_blank" rel="external">moqada/5rolli-crx</a></li>
</ul>
<p>nbemは<a href="https://www.npmjs.com/package/nbem" target="_blank" rel="external">npm</a>で公開されています。ぜひ触ってみてください。<br>Issueやbugなどありましたら<a href="https://github.com/ideyuta/nbem" target="_blank" rel="external">GitHub</a>からお願いします。</p>
</div><div class="Share"><ul><li data-url="http://ideyuta.com/2015/12/08/nbem.html" class="tweet"><a href="https://twitter.com/intent/tweet?original_referer=http://ideyuta.com/2015/12/08/nbem.html&amp;text=nbem - JSX内でBEMを簡単かつ直感的に記述する ｜ ideyuta.com http://ideyuta.com/2015/12/08/nbem.html" class="btn"><i class="znicon-twitter"></i><span class="count"></span></a></li><li data-url="http://ideyuta.com/2015/12/08/nbem.html" class="like"><a href="javascript: void(0);" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://ideyuta.com/2015/12/08/nbem.html&amp;t=nbem - JSX内でBEMを簡単かつ直感的に記述する', 'share', 'width=500, height=280');" class="btn"><i class="znicon-facebook"></i><span class="count"></span></a></li><li data-url="http://ideyuta.com/2015/12/08/nbem.html" class="hatebu"><a href="javascript: void(0);" onclick="window.open('http://b.hatena.ne.jp/entry/add/http://ideyuta.com/2015/12/08/nbem.html', 'share', 'width=750, height=600');" class="btn"><img src="http://b.st-hatena.com/images/entry-button/button-only@2x.png"><span class="count"></span></a></li></ul></div></div></div><div class="Footer"><div class="Profile"><div class="thumb"><img src="/images/ideyuta.jpg"></div><div class="bio"><h4 class="name">井出 優太</h4><p class="summary">1988年静岡県生まれ。多摩美術大学大学院 情報デザイン領域 経験デザイン 修了。株式会社カンム所属。</p><div class="social BtnGroup"><a href="https://twitter.com/_ideyuta" class="btn f twitter"><i class="znicon-twitter"></i><span>Twitter</span></a><a href="https://www.facebook.com/XA2007.055" class="btn f facebook"><i class="znicon-facebook"></i><span>Facebook</span></a><a href="https://github.com/ideyuta" class="btn f github"><i class="znicon-github"></i><span>GitHub</span></a><a href="mailto:ide.yuta@gmail.com" class="btn f"><i class="znicon-mail"></i><span>Mail</span></a></div></div></div><div class="Copyright"><p>&copy; 2015 ideyuta.com</p></div></div></body></html>