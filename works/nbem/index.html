<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta content="ideyuta &lt;ide.yuta@gmail.com&gt;" name="author"/><meta content="IE=edge" http-equiv="X-UA-Compatible"/><meta content="user-scalable=no width=device-width, initial-scale=1.0 maximum-scale=1.0" name="viewport"/><meta data-react-helmet="true" content="最近はReactを書く機会が増え、同時にJSXを書く機会が増えた。HTMLで書いていた時からBEM記法でのクラス記述の冗長性を疎ましく思っていたが、全てJSで書けるようになったので、JSX内でBEMを簡単に記述できるJSモジュールを作ることにした。" name="description"/><title data-react-helmet="true">nbem - JSX内でBEMを簡単かつ直感的に記述する | ideyuta.com</title><link href="/images/favicon.ico" rel="shortcut icon"/><link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css"/><link href="/styles.css" rel="stylesheet"/></head><body><div id="react-mount"><div data-reactid=".k18ktp58nq" data-react-checksum="483157903"><div data-reactid=".k18ktp58nq.0"><noscript data-reactid=".k18ktp58nq.0.0"></noscript><div class="Post" data-reactid=".k18ktp58nq.0.1"><div class="PostHeader" data-reactid=".k18ktp58nq.0.1.0"><h1 class="PostHeader__title" data-reactid=".k18ktp58nq.0.1.0.0">nbem - JSX内でBEMを簡単かつ直感的に記述する</h1><span class="PostHeader__createdAt" data-reactid=".k18ktp58nq.0.1.0.1"><span data-reactid=".k18ktp58nq.0.1.0.1.0">Created </span></span></div><div class="markdown" data-reactid=".k18ktp58nq.0.1.1"><p>最近はReactを書く機会が増え、同時にJSXを書く機会が増えた。HTMLで書いていた時からBEM記法でのクラス記述の冗長性を疎ましく思っていたが、全てJSで書けるようになったので、JSX内でBEMを簡単に記述できるJSモジュールを作ることにした。</p>
<h2>nbem</h2>
<p><a href="https://github.com/ideyuta/nbem">https://github.com/ideyuta/nbem</a></p>
<p>nbemはBEM記法を簡単かつ直感的に記述することを目指したJSモジュール。requireしたnbemのクロージャ関数を変数に入れて使う。</p>
<h3>基本</h3>
<p><code>&amp;</code> で階層（element）を定義し <code>:</code> で変化（modifier）を定義する。</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> nbem = <span class="hljs-built_in">require</span>(nbem);
<span class="hljs-keyword">var</span> bem = nbem();

bem(<span class="hljs-string">'header'</span>); <span class="hljs-comment">// =&gt; "header"</span>
bem(<span class="hljs-string">'&amp;nav'</span>); <span class="hljs-comment">// =&gt; "header__nav"</span>
bem(<span class="hljs-string">'&amp;&amp;item'</span>); <span class="hljs-comment">// =&gt; "header__nav__item"</span>

bem(<span class="hljs-string">'header:global'</span>); <span class="hljs-comment">// =&gt; "header--global"</span>
bem(<span class="hljs-string">'&amp;nav'</span>); <span class="hljs-comment">// =&gt; "header--global__nav"</span>
</code></pre>
<p>クロージャ関数からは文字列が返ってくるのでそのままクラス名へ。</p>
<pre><code class="language-js">&lt;header className={bem(<span class="hljs-string">'header'</span>)} /&gt;
</code></pre>
<h3>クラス名の連結</h3>
<p>状態などの別クラスを連結したい場合は、クロージャ関数の第二引数に文字列もしくは文字列のリストを渡すことで連結できる。</p>
<pre><code class="language-js">bem(<span class="hljs-string">'header'</span>); <span class="hljs-comment">// =&gt; "header"</span>
bem(<span class="hljs-string">'&amp;nav'</span>, <span class="hljs-string">'isActive'</span>); <span class="hljs-comment">// =&gt; "header__nav isActive"</span>
bem(<span class="hljs-string">'&amp;nav'</span>, [<span class="hljs-string">'isActive'</span>, <span class="hljs-string">'isHover'</span>]); <span class="hljs-comment">// =&gt; "header__nav isActive isHover"</span>
bem(<span class="hljs-string">'&amp;&amp;item'</span>); <span class="hljs-comment">// =&gt; "header__nav__item"</span>
</code></pre>
<p>実際のプロダクト内では、<a href="https://github.com/JedWatson/classnames">classnames</a>と併用することが想定される。</p>
<pre><code class="language-js">getClassName() {
  <span class="hljs-keyword">return</span> classnames({<span class="hljs-attr">isActive</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">isHover</span>: <span class="hljs-literal">true</span>});
}
render() {
  <span class="hljs-keyword">const</span> h = nbem();
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{h(</span>'<span class="hljs-attr">header</span>', <span class="hljs-attr">this.getClassName</span>())} /&gt;</span>;
}
</span></code></pre>
<h3>接続詞の変更</h3>
<p>BEMの基本的な接続詞は、elementが <code>'__'</code> 、modifireが <code>'--'</code>であるが、nbemでは変更する機構を備えている。nbemからシングルトンのconfigインスタンスを取り出すことができ、configに対してsetSeparatorを実行することで変更できる。</p>
<pre><code class="language-js"><span class="hljs-keyword">var</span> config = <span class="hljs-built_in">require</span>(nbem).config;
config.setSeparator(<span class="hljs-string">'-'</span>, <span class="hljs-string">'_'</span>); <span class="hljs-comment">// element, modifier</span>
header(<span class="hljs-string">'header:global'</span>); <span class="hljs-comment">// =&gt; "header-global"</span>
header(<span class="hljs-string">'&amp;title'</span>) <span class="hljs-comment">// =&gt; "header-global_title"</span>
</code></pre>
<h3>React ES6 での記述例</h3>
<pre><code class="language-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> nbem <span class="hljs-keyword">from</span> <span class="hljs-string">'nbem'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Header</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  render() {
    <span class="hljs-keyword">const</span> bem = nbem();
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{bem(</span>'<span class="hljs-attr">header</span>')}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{bem(</span>'&amp;<span class="hljs-attr">title</span>')}&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{bem(</span>'&amp;<span class="hljs-attr">description</span>')&gt;</span>Description<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span></span>
    );
  }
}
</code></pre>
<p>Render:</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header__title"</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header__description"</span>&gt;</span>Description<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
</code></pre>
<h2>nbemを利用しているプロジェクト</h2>
<ul>
<li><a href="https://github.com/tongariboyz/5rolli">tongariboyz/5rolli</a></li>
<li><a href="https://github.com/moqada/5rolli-crx">moqada/5rolli-crx</a></li>
</ul>
<p>nbemは<a href="https://www.npmjs.com/package/nbem">npm</a>で公開されています。ぜひ触ってみてください。
Issueやbugなどありましたら<a href="https://github.com/ideyuta/nbem">GitHub</a>からお願いします。</p>
</div></div></div></div></div><script src="/bundle.js"></script><script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create", "UA-36151317-1", "auto");ga("send", "pageview");</script><script async="" src="//platform.instagram.com/jp/embeds.js"></script><script async="" src="//platform.twitter.com/widgets.js"></script><script async="" defer="" src="//assets.pinterest.com/js/pinit.js"></script></body></html>